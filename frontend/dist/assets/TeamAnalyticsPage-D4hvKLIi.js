import{j as e,S as g,G as d,T as j,b as i,y as B,B as k,l as p,E as x,m as o,q as P,p as E,o as l,i as A,h as q}from"./mantine-CZuIZRc1.js";import{r as N}from"./react-core-odM0sU5y.js";import{u as G}from"./queries-6Rqy06Fp.js";import{a as $}from"./api-DKMFut8u.js";import{p as O,S as V,t as D,C as H,D as X,Z as M,_ as Y,$ as J}from"./icons-D07X1pjv.js";import{R as f,B as R,C as I,X as F,Y as S,T as z,L as U,d as y,m as Z,n as _,o as W,p as ee,q as se}from"./charts-BUPZVE1m.js";import"./index-Dc4pxRQV.js";import"./routing-CXNmw2WA.js";function ue(){const[t,c]=N.useState("30d"),[u,w]=N.useState(null),{refetch:m}=G({queryKey:["teamAnalytics",t],queryFn:()=>$.getTeamStats()}),C={teams:[{teamId:"team-1",teamName:"Platform Core",members:[{id:"u1",name:"Alice Silva",role:"Tech Lead",stats:{reviews:45,issuesFound:123,avgReviewTime:180,quality:92,autoFixApplied:56}},{id:"u2",name:"Bob Santos",role:"Senior Dev",stats:{reviews:38,issuesFound:87,avgReviewTime:210,quality:88,autoFixApplied:42}},{id:"u3",name:"Carol Lima",role:"Senior Dev",stats:{reviews:52,issuesFound:145,avgReviewTime:165,quality:94,autoFixApplied:68}},{id:"u4",name:"David Costa",role:"Dev",stats:{reviews:28,issuesFound:64,avgReviewTime:240,quality:82,autoFixApplied:34}}],stats:{totalReviews:163,totalIssues:419,criticalIssues:12,avgReviewTime:199,avgQuality:89,autoFixRate:.68,prsReviewed:89,codeCoverage:78},performance:{velocity:85,efficiency:78,quality:92,collaboration:88,innovation:72}},{teamId:"team-2",teamName:"Frontend Squad",members:[{id:"u5",name:"Eva Oliveira",role:"Tech Lead",stats:{reviews:41,issuesFound:98,avgReviewTime:175,quality:90,autoFixApplied:51}},{id:"u6",name:"Frank Mendes",role:"Senior Dev",stats:{reviews:35,issuesFound:76,avgReviewTime:195,quality:86,autoFixApplied:39}},{id:"u7",name:"Grace Almeida",role:"Dev",stats:{reviews:29,issuesFound:58,avgReviewTime:220,quality:84,autoFixApplied:32}}],stats:{totalReviews:105,totalIssues:232,criticalIssues:8,avgReviewTime:197,avgQuality:87,autoFixRate:.62,prsReviewed:67,codeCoverage:82},performance:{velocity:78,efficiency:82,quality:88,collaboration:92,innovation:85}},{teamId:"team-3",teamName:"Backend Services",members:[{id:"u8",name:"Henry Pereira",role:"Tech Lead",stats:{reviews:48,issuesFound:134,avgReviewTime:170,quality:91,autoFixApplied:59}},{id:"u9",name:"Iris Rodrigues",role:"Senior Dev",stats:{reviews:43,issuesFound:112,avgReviewTime:185,quality:89,autoFixApplied:47}},{id:"u10",name:"Jack Ferreira",role:"Senior Dev",stats:{reviews:39,issuesFound:95,avgReviewTime:200,quality:87,autoFixApplied:41}},{id:"u11",name:"Kate Barbosa",role:"Dev",stats:{reviews:25,issuesFound:52,avgReviewTime:235,quality:80,autoFixApplied:28}}],stats:{totalReviews:155,totalIssues:393,criticalIssues:15,avgReviewTime:198,avgQuality:87,autoFixRate:.65,prsReviewed:82,codeCoverage:71},performance:{velocity:82,efficiency:75,quality:89,collaboration:85,innovation:78}}],leaderboard:[{userId:"u3",userName:"Carol Lima",teamId:"team-1",teamName:"Platform Core",score:94,reviews:52,issuesFound:145,quality:94},{userId:"u8",userName:"Henry Pereira",teamId:"team-3",teamName:"Backend Services",score:91,reviews:48,issuesFound:134,quality:91},{userId:"u1",userName:"Alice Silva",teamId:"team-1",teamName:"Platform Core",score:92,reviews:45,issuesFound:123,quality:92},{userId:"u5",userName:"Eva Oliveira",teamId:"team-2",teamName:"Frontend Squad",score:90,reviews:41,issuesFound:98,quality:90},{userId:"u9",userName:"Iris Rodrigues",teamId:"team-3",teamName:"Backend Services",score:89,reviews:43,issuesFound:112,quality:89}]},n=C.teams,r=u?n.find(s=>s.teamId===u):n[0],Q=[{value:"7d",label:"7 dias"},{value:"30d",label:"30 dias"},{value:"90d",label:"90 dias"},{value:"365d",label:"1 ano"}],v={team1:"#3b82f6",team2:"#a855f7",team3:"#22c55e",team4:"#f97316"},K=r?[{metric:"Velocidade",value:r.performance.velocity,fullMark:100},{metric:"EficiÃªncia",value:r.performance.efficiency,fullMark:100},{metric:"Qualidade",value:r.performance.quality,fullMark:100},{metric:"ColaboraÃ§Ã£o",value:r.performance.collaboration,fullMark:100},{metric:"InovaÃ§Ã£o",value:r.performance.innovation,fullMark:100}]:[],b=n.map(s=>({name:s.teamName,Reviews:s.stats.totalReviews,Issues:s.stats.totalIssues,Quality:s.stats.avgQuality,"Auto-Fix %":Math.round(s.stats.autoFixRate*100)}));return e.jsxs(g,{gap:"md",children:[e.jsxs(d,{justify:"space-between",children:[e.jsxs("div",{children:[e.jsx(j,{order:2,children:"Team Analytics"}),e.jsx(i,{c:"dimmed",children:"AnÃ¡lise detalhada de performance por time e membro"})]}),e.jsxs(d,{children:[e.jsx(B,{value:t,onChange:s=>c(s||"30d"),data:Q,w:100}),e.jsx(k,{leftSection:e.jsx(O,{size:16}),onClick:()=>m(),variant:"light",children:"Atualizar"}),e.jsx(k,{leftSection:e.jsx(V,{size:16}),variant:"light",children:"Exportar"})]})]}),e.jsxs(p,{cols:{base:2,md:4},children:[e.jsx(T,{label:"Total de Times",value:n.length,icon:e.jsx(D,{size:20}),color:"blue"}),e.jsx(T,{label:"Total de Reviews",value:n.reduce((s,a)=>s+a.stats.totalReviews,0),icon:e.jsx(H,{size:20}),color:"cyan"}),e.jsx(T,{label:"Issues Encontrados",value:n.reduce((s,a)=>s+a.stats.totalIssues,0),icon:e.jsx(X,{size:20}),color:"purple"}),e.jsx(T,{label:"Qualidade MÃ©dia",value:`${Math.round(n.reduce((s,a)=>s+a.stats.avgQuality,0)/n.length)}%`,icon:e.jsx(M,{size:20}),color:"green"})]}),e.jsxs(x,{defaultValue:"overview",children:[e.jsxs(x.List,{children:[e.jsx(x.Tab,{value:"overview",leftSection:e.jsx(Y,{size:16}),children:"VisÃ£o Geral"}),e.jsx(x.Tab,{value:"teams",leftSection:e.jsx(D,{size:16}),children:"Por Time"}),e.jsx(x.Tab,{value:"members",leftSection:e.jsx(J,{size:16}),children:"Membros"}),e.jsx(x.Tab,{value:"leaderboard",leftSection:e.jsx(M,{size:16}),children:"Ranking"})]}),e.jsx(x.Panel,{value:"overview",pt:"md",children:e.jsxs(p,{cols:{base:1,md:2},children:[e.jsxs(o,{padding:"lg",withBorder:!0,h:400,children:[e.jsx(j,{order:5,mb:"md",children:"Comparativo entre Times"}),e.jsx(f,{width:"100%",height:320,children:e.jsxs(R,{data:b,children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",tick:{fontSize:12}}),e.jsx(S,{}),e.jsx(z,{}),e.jsx(U,{}),e.jsx(y,{dataKey:"Reviews",fill:v.team1,name:"Reviews"}),e.jsx(y,{dataKey:"Issues",fill:v.team2,name:"Issues"})]})})]}),e.jsxs(o,{padding:"lg",withBorder:!0,h:400,children:[e.jsx(j,{order:5,mb:"md",children:"Qualidade por Time"}),e.jsx(f,{width:"100%",height:320,children:e.jsxs(R,{data:b,layout:"horizontal",children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(F,{type:"number"}),e.jsx(S,{dataKey:"name",type:"category",width:100,tick:{fontSize:12}}),e.jsx(z,{}),e.jsx(y,{dataKey:"Quality",fill:v.team4})]})})]}),e.jsxs(o,{padding:"lg",withBorder:!0,h:400,children:[e.jsx(j,{order:5,mb:"md",children:"Taxa de Auto-Fix"}),e.jsx(f,{width:"100%",height:320,children:e.jsxs(R,{data:b,children:[e.jsx(I,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",tick:{fontSize:12}}),e.jsx(S,{}),e.jsx(z,{}),e.jsx(y,{dataKey:"Auto-Fix %",fill:v.team3})]})})]}),e.jsxs(o,{padding:"lg",withBorder:!0,h:400,children:[e.jsx(j,{order:5,mb:"md",children:"Issues CrÃ­ticos por Time"}),e.jsx(P,{style:{height:320,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(g,{w:"100%",children:n.map(s=>e.jsxs(d,{children:[e.jsx(i,{w:150,size:"sm",children:s.teamName}),e.jsx(E,{value:s.stats.criticalIssues/Math.max(...n.map(a=>a.stats.criticalIssues))*100,color:s.stats.criticalIssues>10?"red":s.stats.criticalIssues>5?"yellow":"green",style:{flex:1}}),e.jsx(i,{w:40,size:"sm",ta:"end",children:s.stats.criticalIssues})]},s.teamId))})})]})]})}),e.jsxs(x.Panel,{value:"teams",pt:"md",children:[e.jsx(d,{mb:"md",children:e.jsx(B,{placeholder:"Selecione um time",data:n.map(s=>({value:s.teamId,label:s.teamName})),value:u,onChange:w,w:250})}),r&&e.jsxs(g,{children:[e.jsxs(p,{cols:{base:1,md:2},children:[e.jsxs(o,{padding:"lg",withBorder:!0,children:[e.jsx(j,{order:5,mb:"md",children:r.teamName}),e.jsxs(p,{cols:2,children:[e.jsx(h,{label:"Reviews",value:r.stats.totalReviews}),e.jsx(h,{label:"Issues",value:r.stats.totalIssues}),e.jsx(h,{label:"CrÃ­ticos",value:r.stats.criticalIssues,color:"red"}),e.jsx(h,{label:"PRs",value:r.stats.prsReviewed}),e.jsx(h,{label:"Qualidade",value:`${r.stats.avgQuality}%`}),e.jsx(h,{label:"Auto-Fix",value:`${Math.round(r.stats.autoFixRate*100)}%`})]})]}),e.jsxs(o,{padding:"lg",withBorder:!0,children:[e.jsx(j,{order:5,mb:"md",children:"Performance"}),e.jsx(f,{width:"100%",height:250,children:e.jsxs(Z,{data:K,children:[e.jsx(_,{}),e.jsx(W,{dataKey:"metric",tick:{fontSize:11}}),e.jsx(ee,{angle:90,domain:[0,100]}),e.jsx(se,{name:r.teamName,dataKey:"value",stroke:v.team1,fill:v.team1,fillOpacity:.6})]})})]})]}),e.jsxs(o,{padding:"lg",withBorder:!0,children:[e.jsx(j,{order:5,mb:"md",children:"Membros"}),e.jsxs(l,{children:[e.jsx(l.Thead,{children:e.jsxs(l.Tr,{children:[e.jsx(l.Th,{children:"Membro"}),e.jsx(l.Th,{children:"Reviews"}),e.jsx(l.Th,{children:"Issues"}),e.jsx(l.Th,{children:"Tempo MÃ©dio"}),e.jsx(l.Th,{children:"Qualidade"}),e.jsx(l.Th,{children:"Auto-Fix"})]})}),e.jsx(l.Tbody,{children:r.members.map(s=>e.jsxs(l.Tr,{children:[e.jsx(l.Td,{children:e.jsxs(d,{gap:"sm",children:[e.jsx(A,{size:"sm",radius:"xl",name:s.name,color:"initials",children:s.name.split(" ").map(a=>a[0]).join("")}),e.jsxs("div",{children:[e.jsx(i,{size:"sm",fw:500,children:s.name}),e.jsx(i,{size:"xs",c:"dimmed",children:s.role})]})]})}),e.jsx(l.Td,{children:s.stats.reviews}),e.jsx(l.Td,{children:s.stats.issuesFound}),e.jsxs(l.Td,{children:[Math.round(s.stats.avgReviewTime/60),"m"]}),e.jsx(l.Td,{children:e.jsxs(q,{color:s.stats.quality>=90?"green":s.stats.quality>=80?"yellow":"red",children:[s.stats.quality,"%"]})}),e.jsx(l.Td,{children:s.stats.autoFixApplied})]},s.id))})]})]})]})]}),e.jsx(x.Panel,{value:"members",pt:"md",children:e.jsx(p,{cols:{base:1,md:2,lg:3},children:n.flatMap(s=>s.members.map(a=>e.jsxs(o,{padding:"md",withBorder:!0,children:[e.jsxs(d,{gap:"sm",mb:"md",children:[e.jsx(A,{size:"md",radius:"xl",name:a.name,children:a.name.split(" ").map(L=>L[0]).join("")}),e.jsxs("div",{children:[e.jsx(i,{fw:600,children:a.name}),e.jsx(i,{size:"xs",c:"dimmed",children:a.role}),e.jsx(q,{size:"xs",variant:"light",children:s.teamName})]})]}),e.jsxs(p,{cols:2,mt:"md",children:[e.jsx(h,{label:"Reviews",value:a.stats.reviews}),e.jsx(h,{label:"Issues",value:a.stats.issuesFound}),e.jsx(h,{label:"Qualidade",value:`${a.stats.quality}%`}),e.jsx(h,{label:"Auto-Fix",value:a.stats.autoFixApplied})]})]},a.id)))})}),e.jsx(x.Panel,{value:"leaderboard",pt:"md",children:e.jsxs(o,{padding:"lg",withBorder:!0,children:[e.jsx(j,{order:5,mb:"md",children:"Ranking de Desenvolvedores"}),e.jsx(g,{gap:"sm",children:C.leaderboard.map((s,a)=>e.jsx(ae,{entry:s,rank:a+1},s.userId))})]})})]})]})}function T({label:t,value:c,icon:u,color:w="blue"}){const m={blue:"#3b82f6",cyan:"#06b6d4",purple:"#a855f7",green:"#22c55e",red:"#ef4444",yellow:"#eab308"};return e.jsx(o,{padding:"md",withBorder:!0,children:e.jsxs(d,{children:[e.jsx("div",{style:{color:m[w]},children:u}),e.jsxs("div",{children:[e.jsx(i,{size:"xs",c:"dimmed",children:t}),e.jsx(i,{fz:"xl",fw:700,children:c})]})]})})}function h({label:t,value:c,color:u="blue"}){return e.jsxs(P,{children:[e.jsx(i,{size:"xs",c:"dimmed",children:t}),e.jsx(i,{size:"lg",fw:600,c:u==="red"?"red":void 0,children:c})]})}function ae({entry:t,rank:c}){const u=m=>{switch(m){case 1:return"yellow";case 2:return"gray";case 3:return"orange";default:return"blue"}},w=m=>{switch(m){case 1:return"ğŸ¥‡";case 2:return"ğŸ¥ˆ";case 3:return"ğŸ¥‰";default:return`#${m}`}};return e.jsx(o,{padding:"sm",withBorder:!0,style:{borderColor:c<=3?`var(--mantine-color-${u(c)}-5)`:void 0},children:e.jsxs(d,{justify:"space-between",children:[e.jsxs(d,{gap:"md",children:[e.jsx(i,{size:"xl",fw:700,c:u(c),children:w(c)}),e.jsx(A,{size:"md",radius:"xl",name:t.userName,children:t.userName.split(" ").map(m=>m[0]).join("")}),e.jsxs("div",{children:[e.jsx(i,{fw:600,children:t.userName}),e.jsx(i,{size:"xs",c:"dimmed",children:t.teamName})]})]}),e.jsxs(d,{gap:"xl",children:[e.jsxs(d,{gap:"sm",children:[e.jsx(i,{size:"sm",c:"dimmed",children:"Score"}),e.jsx(i,{fw:700,size:"lg",children:t.score})]}),e.jsxs(d,{gap:"sm",children:[e.jsx(i,{size:"sm",c:"dimmed",children:"Reviews"}),e.jsx(i,{fw:600,children:t.reviews})]}),e.jsxs(d,{gap:"sm",children:[e.jsx(i,{size:"sm",c:"dimmed",children:"Issues"}),e.jsx(i,{fw:600,children:t.issuesFound})]}),e.jsxs(q,{color:t.quality>=90?"green":t.quality>=80?"yellow":"red",size:"lg",children:[t.quality,"% Qualidade"]})]})]})})}export{ue as TeamAnalyticsPage};
