version: '3.8'

services:
  api:
    build: .
    ports:
      - "8080:8080"
    environment:
      # External PostgreSQL
      DB_URL: jdbc:postgresql://192.168.1.110:5444/pullwise_db?ssl=false&serverTimezone=America/Sao_Paulo
      DB_USER: admin
      DB_PASSWORD: Rapidex@727204
      # External Redis
      REDIS_HOST: 192.168.1.110
      REDIS_PORT: 6379
      REDIS_PASSWORD:
      REDIS_DATABASE: 0
      REDIS_TIMEOUT: 5000
      REDIS_SSL_ENABLED: false
      # External Artemis
      ARTEMIS_BROKER_URL: tcp://192.168.1.110:61616
      ARTEMIS_BROKER_USERNAME: admin
      ARTEMIS_BROKER_PASSWORD: admin
      # STOMP WebSocket
      VENDAX_STOMP_HOST: 192.168.1.110
      VENDAX_STOMP_PORT: 61613
      VENDAX_STOMP_USERNAME: admin
      VENDAX_STOMP_PASSWORD: admin
      # Security
      JWT_SECRET: pullwise-dev-secret
      SERVER_PORT: 8080
      SPRING_PROFILES_ACTIVE: dev
    volumes:
      - ./src/main/resources:/app/src/main/resources
    extra_hosts:
      - "host.docker.internal:host-gateway"
